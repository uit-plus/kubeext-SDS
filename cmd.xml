<?xml version="1.0" encoding="UTF-8" ?>
<root prog="kubesds-adm" description="All storage adaptation tools">
    <storage class="Pool">
        <check name="is_cstor_pool_exist">
            <operation expect="False" opetation="create" error="cstor pool has exist."/>
            <operation expect="True" opetation="delete|start|autostart|stop|unregister" error="cstor pool has not exist."/>
        </check>
        <check name="is_virsh_pool_exist">
            <operation expect="False" opetation="create" error="virsh pool has exist."/>
            <operation expect="True" opetation="delete|start|autostart|stop|unregister" error="virsh pool has not exist."/>
        </check>
        <operation name="create">
            <arg name="pool" type="str" support="dir|uraid|nfs|glusterfs|uus" require="True" range=".*"/>
            <arg name="url" type="str" support="dir|uraid|nfs|glusterfs|uus" require="True" range=".*"/>
            <arg name="content" type="str" support="dir|uraid|nfs|glusterfs" require="True" range="vmd|vmdi|iso"/>
            <arg name="opt" type="str" support="nfs" require="False" range=".*"/>
            <arg name="autostart" type="str" support="dir|uraid|nfs|glusterfs" require="False" range=".*"/>
            <kind type="dir">
                <function>create_localfs_pool</function>
                <function>createVirshPool</function>
            </kind>
            <kind type="uraid">
                <function>createUraidPool</function>
                <function>createVirshPool</function>
            </kind>
            <kind type="nfs">
                <function>createNfsPool</function>
                <function>createVirshPool</function>
            </kind>
            <kind type="glusterfs">
                <function>createGlusterfsPool</function>
                <function>createVirshPool</function>
            </kind>
            <kind type="uus">
                <function>createUusPool</function>
                <function>createVirshPool</function>
            </kind>
        </operation>
        <operation name="delete">
            <arg type="str" support="dir|uraid|nfs|glusterfs|uus" require="True">pool</arg>
            <kind type="dir|uraid|nfs|glusterfs">
                <function>deleteLocalfsPool</function>
                <function>deleteVirshPool</function>
            </kind>
            <kind type="uus">
                <function>deleteUusPool</function>
            </kind>
        </operation>
        <operation name="start">
            <arg type="str" support="dir|uraid|nfs|glusterfs" require="True">pool</arg>
            <kind type="dir|uraid|nfs|glusterfs">
                <function>start_virsh_pool</function>
            </kind>
        </operation>
        <operation name="autostart">
            <arg type="str" support="dir|uraid|nfs|glusterfs" require="True">pool</arg>
            <arg type="bool" support="dir|uraid|nfs|glusterfs" require="True">disable</arg>
            <kind type="dir|uraid|nfs|glusterfs">
                <function>autostart_virsh_pool</function>
            </kind>
        </operation>
        <operation name="undefine">
            <arg type="str" support="dir|uraid|nfs|glusterfs" require="True">pool</arg>
            <kind type="dir|uraid|nfs|glusterfs">
                <function>undefine_virsh_pool</function>
            </kind>
        </operation>
    </storage>
</root>